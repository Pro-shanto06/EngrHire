<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />

  <title>EngrHire BD</title>
  <meta content="" name="description" />
  <meta content="" name="keywords" />

  <!-- Logo -->
  <link href="assets/img/logo.png" rel="icon" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet" />


  <link href="/vendor/aos/aos.css" rel="stylesheet" />
  <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
  <link href="/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
  <link href="/vendor/remixicon/remixicon.css" rel="stylesheet" />
  <link href="/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />


  <link rel="stylesheet" href="/css/client_profile.css" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>

<body>


  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">
      <script src="https://unpkg.com/phosphor-icons"></script>
      <div class="logo">
        <h1><a href="/"><img src="/img/logo.png" alt="" />EngrHire BD</a></h1>
      </div>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="/">Home</a></li>

          {{#if user}}
          {{#if isClient}}
          <li><a class="nav-link scrollto" href="/post-job">Post Jobs</a></li>
          {{/if}}
          {{#if isEngineer}}
          <li><a class="nav-link scrollto" href="/job-list/all">Find Job</a></li>
          {{/if}}
          {{#if isAdmin}}
          <li><a class="nav-link scrollto" href="/post-job">Post Jobs</a></li>
          {{/if}}
          {{else}}
          <li><a class="nav-link scrollto" href="/post-job">Post Jobs</a></li>
          {{/if}}

          <li class="dropdown">
            <a href="#"><span>Explore</span><i class="bi bi-chevron-down"></i></a>
            <ul>

              <li><a class="nav-link scrollto" href="/#services">Services</a></li>
              <li><a class="nav-link scrollto" href="/engineers">Engineers</a></li>

            </ul>
          </li>

          <li class="dropdown">
            <a href="#"><span>Help</span><i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a class="nav-link scrollto" href="/#about">About</a></li>
              <li><a class="nav-link scrollto" href="/#contact">Contact</a></li>
              <li><a class="nav-link scrollto" href="/#faq">FAQ</a></li>
            </ul>
          </li>

          {{#unless user}}
          <ul>
            <li><a href="/login">Login</a></li>
            <li><a href="/select" class="btn-signup">Sign Up</a></li>
          </ul>
          {{/unless}}

          <li class="search-bar">
            <form action="/search" method="GET" onsubmit="return validateSearch()">
              <input type="text" name="query" class="search-input" id="searchInput" placeholder="Search..."
                oninput="toggleSearchButton()" />
              <button type="submit" class="search-button" id="searchButton" disabled><i
                  class="bi bi-search"></i></button>
            </form>
          </li>

          {{#if isClient}}
          <li>
            <a class="getstarted scrollto" href="/client-profile/{{userId}}/1">
              <img src="{{user.profilePicPath}}" alt="Profile Picture" class="rounded-circle profile-picture" />
              <span class="profile-name">{{user.full_name}}</span>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="/profile/{{this.recipient}}/4" id="notificationsDropdown"
              role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-bell" id="notificationIcon"></i>
              <span class="badge bg-theme-color" id="notificationCount">{{unreadNotificationCount}}</span>
            </a>
            <ul class="dropdown-menu" aria-labelledby="notificationsDropdown" style="right: 0; left: auto; top: 40px;">
              {{#if unreadNotificationCount}}
              {{#each unreadNotifications}}
              <li><a class="dropdown-item" href="/profile/{{this.recipient}}/4">{{this.content}}</a></li>
              {{/each}}
              {{else}}
              <li><a class="dropdown-item" href="/profile/{{this.recipient}}/4">No unread notifications</a></li>
              {{/if}}
            </ul>
          </li>
          <span class="material-symbols-outlined">
            <a href="/logout">Logout</a>
          </span>
          {{/if}}

          {{#if isEngineer}}
          <li>
            <a class="getstarted scrollto" href="/profile/{{userId}}/1">
              <img src="{{user.profilePicPath}}" alt="Profile Picture" class="rounded-circle profile-picture" />
              <span class="profile-name">{{user.full_name}}</span>
            </a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="/profile/{{this.recipient}}/4" id="notificationsDropdown"
              role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fas fa-bell" id="notificationIcon"></i>
              <span class="badge bg-theme-color" id="notificationCount">{{unreadNotificationCount}}</span>
            </a>
            <ul class="dropdown-menu" aria-labelledby="notificationsDropdown" style="right: 0; left: auto; top: 40px;">
              {{#if unreadNotificationCount}}
              {{#each unreadNotifications}}
              <li><a class="dropdown-item" href="/profile/{{this.recipient}}/4">{{this.content}}</a></li>
              {{/each}}
              {{else}}
              <li><a class="dropdown-item" href="/profile/{{this.recipient}}/4">No unread notifications</a></li>
              {{/if}}
            </ul>
          </li>
          <span class="material-symbols-outlined">
            <a href="/logout">Logout</a>
          </span>
          {{/if}}

          {{#if isAdmin}}
          <li>
            <a class="getstarted scrollto" href="/admin-dashboard">
              <img src="{{user.profilePicPath}}" alt="Profile Picture" class="rounded-circle profile-picture" />
              <span class="profile-name">{{user.full_name}}</span>
            </a>
          </li>
          <span class="material-symbols-outlined">
            <a href="/logout">Logout</a>
          </span>
          {{/if}}

        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->

  <br /><br /><br /><br />


  <div class="sidebar open">
    <div class="logo-details">
      <i class="bx bx-grid-alt icon"></i>
      <div class="logo_name">Dashboard</div>
      <i class="bx bx-menu" id="btn"></i>
    </div>




    <div>
      <ul class="nav-list">
        {{#if isEngineer}}
        <li>
          <a href="#client-info">
            <i class="bx bx-user"></i>
            <span class="links_name">Client Info</span>
          </a>
          <span class="tooltip">Client Info</span>
        </li>
        {{/if}}

        {{#if isClient}}
        <li>
          <a href="#engineer-info">
            <i class="bx bx-user"></i>
            <span class="links_name">Engineer Info</span>
          </a>
          <span class="tooltip">Engineer Info</span>
        </li>
        {{/if}}

        <li>
          <a href="#job-info">
            <i class="bx bx-pie-chart-alt-2"></i>
            <span class="links_name">Job Info</span>
          </a>
          <span class="tooltip">Job Info</span>
        </li>



        <li>
          <a href="#bid-info">
            <i class="bx bx-dollar"></i>
            <span class="links_name">Bid Info</span>
          </a>
          <span class="tooltip">Bid Info</span>
        </li>
        {{#if isClient}}

        <li>
          <a href="#payments">
            <i class="bx bx-credit-card"></i>
            <span class="links_name">Payments</span>
          </a>
          <span class="tooltip">Payments</span>
        </li>

        {{/if}}
        <li>
          <a href="#rate">
            <i class="bx bx-heart"></i>
            <span class="links_name">Rating & Reviews</span>
          </a>
          <span class="tooltip">Ratings</span>
        </li>

        <li>
          <a href="/work/{{workId}}/chat">
            <i class="bx bx-message"></i>
            <span class="links_name">chat</span>
          </a>
          <span class="tooltip">chat</span>
        </li>
      </ul>


    </div>


  </div>


  {{#if isEngineer}}

  <section class="home-section" id="client-info" class="info-card">
    <div class="row gutters-sm">
      <div class="content">
        <div id="post-container">
          <div class="main">
            <div class="engrwrapper">
              <div class="engrright">
                <div class="engrinfo">
                  <h3>{{client.full_name}}</h3>
                  <div class="engrinfo_data">
                    <div class="engrdata">
                      <h4>Email</h4>
                      <p>{{client.email}}</p>
                    </div>
                    <div class="engrdata">
                      <h4>Phone</h4>
                      <p>{{client.mobile}}</p>
                    </div>
                  </div>
                </div>

                <div class="engrprojects">

                  <div class="engrprojects_data">
                    <div class="engrdata">
                      <h4>Website </h4>
                      <p>{{client.website}}</p>
                    </div>

                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </section>
  {{/if}}

  {{#if isClient}}



  <section class="home-section" id="engineer-info" class="info-card">
    <div class="row gutters-sm">




      <div class="content">
        <div id="post-container">

          <div class="main">






            <div class="engrwrapper">

              <div class="engrright">
                <div class="engrinfo">
                  <h3>{{engineer.full_name}}</h3>
                  <p>{{engineer.designation}}</p>
                  <div class="engrinfo_data">
                    <div class="engrdata">
                      <h4>Email</h4>
                      <p>{{engineer.email}}</p>
                    </div>
                    <div class="engrdata">
                      <h4>Phone</h4>
                      <p>{{engineer.mobile}}</p>
                    </div>
                  </div>
                </div>

                <div class="engrprojects">

                  <div class="engrprojects_data">
                    <div class="engrdata">
                      <h4>Website </h4>
                      <p>{{engineer.website}}</p>
                    </div>
                    <div class="engrdata">
                      <h4>Field Of Expertise </h4>
                      <p>{{engineer.field_of_expertise}}</p>
                    </div>


                  </div>
                </div>

              </div>
            </div>

          </div>
        </div>
      </div>


    </div>

  </section>








  {{/if}}


  <section class="home-section" id="job-info">
    <div class="row gutters-sm">
      <div class="main">
        <div class="engrwrapper">
          <div class="engrright">
            <div class="engrinfo">
              <h3>Job Information</h3>
              <div class="engrinfo_data">
                <div class="engrdata">
                  <h4>Job Title</h4>
                  <p>{{job.jobTitle}}</p>
                </div>
                <div class="engrdata">
                  <h4>Category</h4>
                  <p>{{job.category}}</p>
                </div>
              </div>
            </div>

            <div class="engrprojects">
              <div class="engrprojects_data">
                <div class="engrdata">
                  <h4>Job Details</h4>
                  <p>{{job.jobDetails}}</p>
                </div>
                <div class="engrdata">
                  <h4>Job Requirements</h4>
                  <p>{{job.jobRequirements}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


  <section class="home-section" id="bid-info">
    <div class="row gutters-sm">
      <div class="main">
        <div class="engrwrapper">
          <div class="engrright">
            <div class="engrinfo">
              <h3>Bid Information</h3>
              <div class="engrinfo_data">
                <div class="engrdata">
                  <h4>Bid Amount</h4>
                  <p>${{bid.bidAmount}}</p>
                </div>
                <div class="engrdata">
                  <h4>Status</h4>
                  <p>{{bid.status}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


  {{#if isClient}}

  <section class="home-section" id="payments" class="info-card">
    {{#if isPaymentComplete}}


    <div class="row gutters-sm">

      <div class="main">

        <div class="card">

          <p>Payment complete. Thank you!</p>

        </div>
      </div>
    </div>
    {{else}}
    <div class="payment-container">
      <form action="/process-payment" method="post">


        <div class="row">

          <div class="col">

            <h3 class="title">Engineer Info</h3>


            <div class="inputBox">
              <span>full name :</span>
              <input type="text" id="engineer_full_name" name="engineer_full_name" value="{{engineer.full_name}}"
                readonly />

            </div>
            <div class="inputBox">
              <span>email :</span>
              <input type="text" id="email" name="email" value="{{engineer.email}}" readonly />
            </div>
            <div class="inputBox">
              <span>mobile :</span>
              <input type="text" id="mobile" name="mobile" value="{{engineer.mobile}}" readonly />
            </div>
            <div class="inputBox">
              <span>Address :</span>
              <input type="text" id="Address" name="Address" value="{{engineer.address}}" readonly />
            </div>


          </div>

          <div class="col">

            <h3 class="title">Engineer Card Info</h3>
            <div class="inputBox">
              <span>name on card :</span>
              <input type="text" id="cardHolderName" name="cardHolderName" value="{{engineer.cardHolderName}}"
                readonly />
            </div>
            <div class="inputBox">
              <span>credit card number :</span>
              <input type="text" id="cardNumber" name="cardNumber" value="{{engineer.cardNumber}}" readonly />
            </div>
            <div class="inputBox">
              <span>exp month :</span>
              <input type="text" id="cardExpMonth" name="cardExpMonth" value="{{engineer.cardExpMonth}}" readonly />
            </div>

            <div class="flex">
              <div class="inputBox">
                <span>exp year :</span>
                <input type="text" id="cardExpYear" name="cardExpYear" value="{{engineer.cardExpYear}}" readonly />
              </div>
              <div class="inputBox">
                <span>CVV :</span>
                <input type="text" id="cardCVV" name="cardCVV" value="{{engineer.cardCVV}}" readonly />
              </div>


            </div>

          </div>


          <div class="row">

            <div class="col">

              <h3 class="title">Client Info</h3>

              <div class="inputBox">
                <span>full name :</span>
                <input type="text" id="full_name" name="full_name" value="{{client.full_name}}" readonly />
              </div>
              <div class="inputBox">
                <span>email :</span>
                <input type="text" id="email" name="email" value="{{client.email}}" readonly />
              </div>
              <div class="inputBox">
                <span>mobile :</span>
                <input type="text" id="mobile" name="mobile" value="{{client.mobile}}" readonly />
              </div>

              <div class="inputBox">
                <span>Address :</span>
                <input type="text" id="Address" name="Address" value="{{client.address}}" readonly />
              </div>


            </div>

            <div class="col">

              <h3 class="title">Client Card Info</h3>
              <div class="inputBox">
                <span>name on card :</span>
                <input type="text" id="cardHolderName" name="cardHolderName" value="{{client.cardHolderName}}"
                  readonly />
              </div>
              <div class="inputBox">
                <span>credit card number :</span>
                <input type="text" id="cardNumber" name="cardNumber" value="{{client.cardNumber}}" readonly />
              </div>
              <div class="inputBox">
                <span>exp month :</span>
                <input type="text" id="cardExpMonth" name="cardExpMonth" value="{{client.cardExpMonth}}" readonly />
              </div>

              <div class="flex">
                <div class="inputBox">
                  <span>exp year :</span>
                  <input type="text" id="cardExpYear" name="cardExpYear" value="{{client.cardExpYear}}" readonly />
                </div>
                <div class="inputBox">
                  <span>CVV :</span>
                  <input type="text" id="cardCVV" name="cardCVV" value="{{client.cardCVV}}" readonly />
                </div>



              </div>

            </div>

            <div class="inputBox">
              <span>Available Balance:</span>
              <input type="text" value="{{client.balance}}" readonly />
            </div>
          </div>
          <div class="inputBox">
            <span>payment amount :</span>
            <input type="text" id="paymentAmount" name="paymentAmount" />
          </div>
        </div>
        <input type="hidden" name="clientId" value="{{client._id}}" />
        <input type="hidden" name="engineerId" value="{{engineer._id}}" />
        <input type="hidden" name="workId" value="{{work._id}}" />

        <input type="submit" value="Proceed to Checkout" class="submit-btn">

      </form>

    </div>

    {{/if}}
  </section>
  {{/if}}


  <section class="home-section" id="rate">
    <div class="row gutters-sm">
      <div class="main">
        <div class="engrwrapper">
          <div class="engrright">
            <div class="engrinfo">
              {{#if isClient}}
              {{#if isratedByClient}}
              <h3>Rating Complete</h3>
              <p>Thank you for your feedback!</p>
              {{else}}
              <h3>Rate Your Experience with the Engineer</h3>
              <div class="engrinfo_data">
                <form action="/submit-engineer-rating" method="post">
                  <input type="hidden" name="workId" value="{{work._id}}" />
                  <input type="hidden" name="engineerId" value="{{engineer._id}}" />

                  <div class="rating" id="engineerRating">
                    <i class="bi bi-star" data-rating="1"></i>
                    <i class="bi bi-star" data-rating="2"></i>
                    <i class="bi bi-star" data-rating="3"></i>
                    <i class="bi bi-star" data-rating="4"></i>
                    <i class="bi bi-star" data-rating="5"></i>
                  </div>
                  <input type="hidden" name="engineerRating" id="selectedEngineerRating" />

                  <label for="engineerFeedback">Engineer Feedback:</label>
                  <textarea id="engineerFeedback" name="engineerFeedback" rows="4" cols="50"></textarea>
                  <button type="submit"
                    style="background-color: #3498db; color: #fff; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top:15px;">Submit
                    Rating</button>
                </form>
              </div>
              {{/if}}
              {{/if}}

              {{#if isEngineer}}
              {{#if isratedByEngineer}}
              <h3>Rating Complete</h3>
              <p>Thank you for your feedback!</p>
              {{else}}
              <h3>Rate Your Experience with the Client</h3>
              <div class="engrinfo_data">
                <form action="/submit-client-rating" method="post">
                  <input type="hidden" name="workId" value="{{work._id}}" />
                  <input type="hidden" name="clientId" value="{{client._id}}" />

                  <div class="rating" id="clientRating">
                    <i class="bi bi-star" data-rating="1"></i>
                    <i class="bi bi-star" data-rating="2"></i>
                    <i class="bi bi-star" data-rating="3"></i>
                    <i class="bi bi-star" data-rating="4"></i>
                    <i class="bi bi-star" data-rating="5"></i>
                  </div>
                  <input type="hidden" name="clientRating" id="selectedClientRating" />

                  <label for="clientFeedback">Client Feedback:</label>
                  <textarea id="clientFeedback" name="clientFeedback" rows="4" cols="50"></textarea>
                  <button type="submit"
                    style="background-color: #3498db; color: #fff; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top:15px;">Submit
                    Rating</button>

                </form>
              </div>
              {{/if}}
              {{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>



  <script>

    function handleRating(rating, target, ratingInputId) {
      const stars = target.parentNode.querySelectorAll('i');
      const ratingValue = Array.from(stars).indexOf(target) + 1;

      for (let i = 0; i < stars.length; i++) {
        if (i < ratingValue) {
          stars[i].classList.add('active');
        } else {
          stars[i].classList.remove('active');
        }
      }


      const ratingInput = document.getElementById(ratingInputId);
      ratingInput.value = ratingValue;


      console.log(`Selected Rating for ${ratingInputId}:`, ratingValue);
    }


    document.addEventListener('DOMContentLoaded', function () {
      const engineerStarIcons = document.querySelectorAll('#engineerRating i');

      engineerStarIcons.forEach(function (star) {
        star.addEventListener('click', function (event) {
          handleRating(event, event.target, 'selectedEngineerRating');
        });
      });
    });


    document.addEventListener('DOMContentLoaded', function () {
      const clientStarIcons = document.querySelectorAll('#clientRating i');

      clientStarIcons.forEach(function (star) {
        star.addEventListener('click', function (event) {
          handleRating(event, event.target, 'selectedClientRating');
        });
      });
    });
  </script>






  <script>
    const navLinks = document.querySelectorAll('.nav-list a');
    const contentSections = document.querySelectorAll('.home-section');

    contentSections.forEach((section, index) => {
      if (index > 0) {
        section.style.display = 'none';
      }
    });


    function showSectionFromHash() {
      const hash = window.location.hash.substring(1);
      const targetSectionId = hash.replace(/\//g, "_");

      const targetSection = document.getElementById(targetSectionId);
      if (targetSection) {
        contentSections.forEach(section => {
          section.style.display = 'none';
        });
        targetSection.style.display = 'block';
      }
    }


    showSectionFromHash();

    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {

        e.preventDefault();

        contentSections.forEach(section => {
          section.style.display = 'none';
        });

        const targetSectionId = link.getAttribute('href').substring(1).replace(/\//g, "_");
        console.log('Target Section ID:', targetSectionId);

        const activeSection = document.getElementById(targetSectionId);

        if (activeSection) {
          activeSection.style.display = 'block';
        }


        if (link.getAttribute('href').includes('/chat')) {

          window.location.href = link.getAttribute('href');
        } else {

          history.pushState(null, null, `#${link.getAttribute('href').substring(1)}`);
        }
      });
    });


    window.addEventListener('hashchange', showSectionFromHash);
  </script>







  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript">

  </script>




  <script src="/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="/vendor/aos/aos.js"></script>
  <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="/vendor/php-email-form/validate.js"></script>



  <script>
    let sidebar = document.querySelector(".sidebar");
    let closeBtn = document.querySelector("#btn");


    closeBtn.addEventListener("click", () => {
      sidebar.classList.toggle("open");
      menuBtnChange();
    });




    function menuBtnChange() {
      if (sidebar.classList.contains("open")) {
        closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");
      } else {
        closeBtn.classList.replace("bx-menu-alt-right", "bx-menu");
      }
    }
  </script>


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../bids.js"></script>






</body>

</html>