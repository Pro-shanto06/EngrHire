<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard</title>
  <style>
    .card {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 16px;
      margin: 16px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
  </style>

  <!-- Logo -->
  <link href="assets/img/logo.png" rel="icon" />

  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet" />
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">



  
  <link rel="stylesheet" href="/css/admin.css" />


  <style>
    .dashboard-overview {
      background: linear-gradient(to right, #2980b9, #2c3e50);
      border-radius: 30px;
      padding: 30px 0;
      color: #fff;
    }
   .sidebar li a.active {
    background-color: #333; /* Set your desired background color */
    color: #fff; /* Set your desired text color */
  }

  </style>

</head>

<body>
  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">
      <script src="https://unpkg.com/phosphor-icons"></script>
      <div class="logo">
        <h1><a href="/"><img src="assets/img/logo.png" alt="">EngrHire BD</a></h1>

      </div>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="/">Home</a></li>
          {{#if user}}
          {{#if isClient}}
          <li><a class="nav-link scrollto" href="/post-job">Post Jobs</a></li>
          {{/if}}
          {{#if isEngineer}}
          <li><a class="nav-link scrollto" href="/engineer-post">Post Jobs</a></li>
          {{/if}}
          {{#if isAdmin}}
          <li><a class="nav-link scrollto" href="/engineer-post">Post Jobs</a></li>
          {{/if}}
          {{else}}
          <li><a class="nav-link scrollto" href="/post-job">Post Jobs</a></li>
          {{/if}}
          <li class="dropdown">
            <a href="#"><span>Explore</span>
            </a>
            <ul>
              {{#if user}}
              {{#if isEngineer}}
              <li><a class="nav-link scrollto" href="/job-list/all">Find Job</a></li>
              <li><a class="nav-link scrollto" href="#services">Services</a></li>
              {{/if}}

              {{#if isClient}}
              <li><a class="nav-link scrollto" href="/job-list/all">Find Engineers</a></li>
              <li><a class="nav-link scrollto" href="#services">Services</a></li>
              {{/if}}
              {{#if isAdmin}}
              <li><a class="nav-link scrollto" href="/job-list/all">Find Job</a></li>
              <li><a class="nav-link scrollto" href="/job-list/all">Find Engineers</a></li>
              <li><a class="nav-link scrollto" href="#services">Services</a></li>
              {{/if}}
              {{else}}
              <li><a class="nav-link scrollto" href="/job-list/all">Find Job</a></li>
              <li><a class="nav-link scrollto" href="/job-list/all">Find Engineers</a></li>
              <li><a class="nav-link scrollto" href="#services">Services</a></li>
              {{/if}}

            </ul>


          </li>

          <li class="dropdown">
            <a href="#"><span>Help</span>

            </a>
            <ul>

              <li><a class="nav-link scrollto" href="#about">About</a></li>
              <li><a class="nav-link scrollto" href="#contact">Contact</a></li>
              <li><a class="nav-link scrollto" href="#faq">FAQ</a></li>

            </ul>

          </li>


          {{#unless user}}


          <ul>
            <li><a href="/login">Login</a></li>
            <li><a href="/select" class="btn-signup">Sign Up</a></li>
          </ul>

          {{/unless}}


         <li class="search-bar">
  <form action="/search" method="GET">
    <input type="text" name="query" class="search-input" placeholder="Search...">
    <button type="submit" class="search-button"><i class="bi bi-search"></i></button>
  </form>
</li>

          {{#if isClient}}
          <li>
            <a class="getstarted scrollto" href="/client-profile/{{userId}}/1">
              <img src="{{user.profilePicPath}}" alt="Profile Picture" class="rounded-circle profile-picture" />
              <span class="profile-name">{{user.full_name}}</span>

            </a>
          </li>

          <span class="material-symbols-outlined">
            <a href="/logout">Logout</a>
          </span>

          {{/if}}

          {{#if isEngineer}}
          <li>
            <a class="getstarted scrollto" href="/profile/{{userId}}/1">
              <img src="{{user.profilePicPath}}" alt="Profile Picture" class="rounded-circle profile-picture" />
              <span class="profile-name">{{user.full_name}}</span>
            </a>
          </li>

          <span class="material-symbols-outlined">
            <a href="/logout">Logout</a>
          </span>

          {{/if}}


          {{#if isAdmin}}
          <li>
            <a class="getstarted scrollto" href="/profile/{{userId}}/1">
              <img src="{{user.profilePicPath}}" alt="Profile Picture" class="rounded-circle profile-picture" />
              <span class="profile-name">{{user.full_name}}</span>
            </a>
          </li>

          <span class="material-symbols-outlined">
            <a href="/logout">Logout</a>
          </span>

          {{/if}}




        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header><!-- End Header -->



  <div class="sidebar open">
    <div class="logo-details">
      <i class="bx bx-grid-alt icon"></i>
      <div class="logo_name">Dashboard</div>
      <i class="bx bx-menu" id="btn"></i>
    </div>
    <ul class="nav-list">


      <li>
        <a href="#overview">
          <i class="bx bx-star"></i>
          <span class="links_name">Overview</span>
        </a>
        <span class="tooltip">Overview</span>
      </li>


      <!-- Admin Profile -->
      <li>
        <a href="#profile">
          <i class="bx bx-user"></i>
          <span class="links_name">Admin Profile</span>
        </a>
        <span class="tooltip">Admin Profile</span>
      </li>

      <!-- Manage Client User -->
      <li>
        <a href="#client">
          <i class="bx bx-user"></i>
          <span class="links_name">Manage Client User</span>
        </a>
        <span class="tooltip">Manage Client User</span>
      </li>

      <!-- Manage Engineer User -->
      <li>
        <a href="#engineer">
          <i class="bx bx-user"></i>
          <span class="links_name">Manage Engineer User</span>
        </a>
        <span class="tooltip">Manage Engineer User</span>
      </li>

      <!-- Manage Post (all) -->
      <li>
        <a href="#job">
          <i class="bx bx-file"></i>
          <span class="links_name">Manage Post (all)</span>
        </a>
        <span class="tooltip">Manage Post (all)</span>
      </li>


      <!-- Payment Managements -->
      <li>
        <a href="#payments">
          <i class="bx bx-credit-card"></i>
          <span class="links_name">Payment Managements</span>
        </a>
        <span class="tooltip">Payment Managements</span>
      </li>


    

      <!-- Support & Help Center -->
      <li>
        <a href="#contact-messages">
          <i class="bx bx-help-circle"></i>
          <span class="links_name">Support & Help Center</span>
        </a>
        <span class="tooltip">Support & Help Center</span>
      </li>

      <!-- Review and Rating Management -->
    

    </ul>
  </div>

  {{!-- Main container Beside Sidebar --}}
<section id="overview" class="home-section">

    <div class="dcont container">
      <div class="main-body">
        <h1 style="margin-top: 10px;">Admin Dashboard</h1>

        <!-- Dashboard Overview Section -->
        <section class="dashboard-overview">
          <div class="container">
            <h2>Overview</h2>

            <!-- Cards for Counts -->
            <div class="row">
              <!-- Engineers Count Card -->
              <div class="col-sm-6 col-md-3 mb-3">
                <div class="card text-white bg-primary">
                  <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-users"></i> Engineers</h5>
                    <p class="card-text">{{engineers.length}}</p>
                  </div>
                </div>
              </div>

              <!-- Clients Count Card -->
              <div class="col-sm-6 col-md-3 mb-3">
                <div class="card text-white bg-success">
                  <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-user-tie"></i> Clients</h5>
                    <p class="card-text">{{clients.length}}</p>
                  </div>
                </div>
              </div>

              <!-- Jobs Count Card -->
              <div class="col-sm-6 col-md-3 mb-3">
                <div class="card text-white bg-info">
                  <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-briefcase"></i> Jobs</h5>
                    <p class="card-text">{{jobs.length}}</p>
                  </div>
                </div>
              </div>


              <!-- Category Count Card -->
              <div class="col-sm-6 col-md-3 mb-3">
                <div class="card text-white bg-dark">
                  <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-th"></i> Category</h5>
                    <p class="card-text">18</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

</section>



        <br>
<section id="job" class="home-section">
        <!-- Clients Table -->
        <div class="container mt-5">
          <h2>Jobs</h2>

          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead class="thead-light">
                <tr style="font-size: 18px;">
                  <th>Job ID</th>
                  <th>Title</th>
                  <th>Client Name</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {{#each jobs}}
                <tr>
                  <td>{{this._id}}</td>
                  <td>{{this.jobTitle}}</td>
                  <td>{{this.clientName}}</td>
                  <td>
                    <form method="POST" action="/admin/delete-job/{{this._id}}">
                      <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                  </td>
                </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>

        </section>

<section id="client" class="home-section">
        <!-- Clients Table -->
        <div class="container mt-5">
          <h2>Clients</h2>
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead class="thead-light">
                <tr style="font-size: 18px;">
                  <th>Client ID</th>
                  <th>Email</th>
                  <th>Full Name</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                {{#each clients}}
                <tr>
                  <td>{{this._id}}</td>
                  <td>{{this.email}}</td>
                  <td>{{this.full_name}}</td>
                  <td>
                    <form method="POST" action="/admin/delete-client/{{this._id}}">
                      <button type="submit" class="btn btn-danger">Delete</button>
                    </form>
                  </td>
                </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>


</section>

<section id="engineer" class="home-section">
        <!-- Engineers Table -->
        <div class="container mt-5">
          <h2>Engineers</h2>
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead class="thead-light">
                <tr style=" font-size: 18px; ">
          <th>Engineer ID</th>
          <th>Email</th>
          <th>Full Name</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {{#each engineers}}
        <tr>
          <td>{{this._id}}</td>
          <td>{{this.email}}</td>
          <td>{{this.full_name}}</td>
          <td>
            <form method="POST" action="/admin/delete-engineer/{{this._id}}">
                  <button type="submit" class="btn btn-danger">Delete</button>
                  </form>
                  </td>
                  </tr>
                  {{/each}}
                  </tbody>
            </table>
          </div>
        </div>

</section>


<section id="bids" class="home-section">
        <!-- Bids Table -->
        <div class="container mt-5">
          <h2>Bids</h2>
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead class="thead-light">
                <tr style=" font-size: 18px; ">
          <th>Bid ID</th>
          <th>Job Title</th>
          <th>Engineer Name</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {{#each bids}}
        <tr>
          <td>{{this._id}}</td>
          <td>{{this.jobTitle}}</td>
          <td>{{this.engineerFullName}}</td>
          <td>
            <form method=" POST" action="/admin/delete-bid/{{this._id}}">
                  <button type="submit" class="btn btn-danger">Delete</button>
                  </form>
                  </td>
                  </tr>
                  {{/each}}
                  </tbody>
            </table>
          </div>
        </div>

</section>

<section id="works" class="home-section">

        <!-- Works Table -->
        <div class="container mt-5">
          <h2>Works</h2>
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead class="thead-light">
                <tr style=" font-size: 18px; ">
          <th>Work ID</th>
          <th>Engineer Name</th>
          <th>Job Title</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {{#each works}}
        <tr>
          <td>{{this._id}}</td>
          <td>{{this.engineer.email}}</td>
          <td>{{this.job.jobTitle}}</td>
          <td>
            <form method=" POST" action="/admin/delete-work/{{this._id}}">
                  <button type="submit" class="btn btn-danger">Delete</button>
                  </form>
                  </td>
                  </tr>
                  {{/each}}
                  </tbody>
            </table>
          </div>
        </div>

        </section>



        <!-- Add this section at the end of your HTML file -->
<section id="contact-messages" class="home-section">
  <!-- Contact Messages Table -->
  <div class="container mt-5">
    <h2>Contact Messages</h2>
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead class="thead-light">
          <tr style="font-size: 18px;">
            <th>Name</th>
            <th>Email</th>
            <th>Subject</th>
            <th>Message</th>
          </tr>
        </thead>
        <tbody>
          {{#each contactMessages}}
            <tr>
              <td>{{this.name}}</td>
              <td>{{this.email}}</td>
              <td>{{this.subject}}</td>
              <td>{{this.message}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</section>


<!-- Add this section at the end of your HTML file -->
<section id="payments" class="home-section">
  <!-- Payments Table -->
  <div class="container mt-5">
    <h2>Payments</h2>
    <div class="table-responsive">
      <table class="table table-bordered table-hover">
        <thead class="thead-light">
          <tr style="font-size: 18px;">
            <th>Engineer Name</th>
             <th>Engineer Email</th>
            <th>Client Name</th>
              <th>Client Email</th>
            <th>Work</th>
            <th>Amount</th>
            <th>Timestamp</th>
          </tr>
        </thead>
        <tbody>
          {{#each payments}}
            <tr>
              <td>{{this.engineer.full_name}}</td>
              
              <td>{{this.engineer.email}}</td>
              <td>{{this.client.full_name}}</td>
              <td>{{this.client.email}}</td>
              <td>{{this.work.job.jobTitle}}</td>
              <td>{{this.amount}}</td>
              <td>{{this.timestamp}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
</section>



<section id="profile" class="home-section">



   <div class="dcont container">
      <div class="main-body">
        <div class="row gutters-sm">
          <div class="col-md-4 mb-3">
            <div class="card">
              <div class="card-body">
                <div class="profile-container">
                  <img src="{{admin.profilePicPath}}" alt="Profile Picture" class="profile-image" />

                  <div class="mt-3">
                    <h4>{{admin.full_name}}</h4>
                     <div class="mt-3">{{admin.role}}</div>
                     <div class="mt-3">{{admin.address}}</div>
                   
                  </div>
                </div>
              </div>
            </div>
         
          </div>
          <div class="col-md-8 colmd8">
            <div class="card mb-3">
              <div class="card-body">
                <div class="row">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Full Name</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">
                    {{admin.full_name}}
                  </div>
                </div>
                <hr />
                <div class="row">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Email</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">{{admin.email}}</div>
                </div>

                <hr />
                <div class="row">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Mobile</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">{{admin.mobile}}</div>
                </div>
                <hr />
                <div class="row">
                  <div class="col-sm-3">
                    <h6 class="mb-0">Address</h6>
                  </div>
                  <div class="col-sm-9 text-secondary">{{admin.address}}</div>
                </div>
                <hr />

                

           {{#if isAdmin}}
  {{#if canEdit}}
    <div class="row">
      <div class="col-sm-12">
        <a class="btn btn-info" href="/edit-admin-profile/{{admin._id}}">Edit</a>
      </div>
    </div>
  {{/if}}
{{/if}}


              </div>
            </div>
          </div>
           </div>
            </div>
             </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Get all list items
    const tabs = document.querySelectorAll(".sidebar li a");

    // Add click event listener to each tab
    tabs.forEach((tab) => {
      tab.addEventListener("click", function () {
        // Remove "active" class from all tabs
        tabs.forEach((t) => t.classList.remove("active"));

        // Add "active" class to the clicked tab
        this.classList.add("active");
      });
    });
  });
</script>


<script>
  const navLinks = document.querySelectorAll('.nav-list a');
  const contentSections = document.querySelectorAll('.home-section');

  contentSections.forEach((section, index) => {
    if (index > 0) {
      section.style.display = 'none';
    }
  });

  navLinks.forEach(link => {
    link.addEventListener('click', (e) => {
      e.preventDefault();

      contentSections.forEach(section => {
        section.style.display = 'none';
      });

      const targetSectionId = link.getAttribute('href').substring(1); 
      const activeSection = document.getElementById(targetSectionId);

      if (activeSection) {
        activeSection.style.display = 'block';
      }
    });
  });
</script>





  <script>
    let sidebar = document.querySelector(".sidebar");
    let closeBtn = document.querySelector("#btn");


    closeBtn.addEventListener("click", () => {
      sidebar.classList.toggle("open");
      menuBtnChange();
    });

    function menuBtnChange() {
      if (sidebar.classList.contains("open")) {
        closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");
      } else {
        closeBtn.classList.replace("bx-menu-alt-right", "bx-menu");
      }
    }
  </script>

  <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>


  <script src="assets/js/main.js"></script>
 


</body>

</html>